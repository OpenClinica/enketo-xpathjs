Date.prototype.toISOLocalString=function(){return"Invalid Date"===this.toString()?this.toString():new Date(this.getTime()-60*this.getTimezoneOffset()*1e3).toISOString().replace("Z",this.getTimezoneOffsetAsTime())},Date.prototype.getTimezoneOffsetAsTime=function(){var e,t,n,r,o=function(e){return e<10?"0"+e:e};return"Invalid Date"===this.toString()?this.toString():(e=this.getTimezoneOffset(),r=e<0?"+":"-",t=o(Math.abs(Math.floor(e/60))),n=o(Math.abs(Math.floor(e%60))),r+t+":"+n)};var XPathJS=function(){var e,t,n,r,o,i,s,a,u,c,l,f,p,h,d,g,m,b=[],y="http://www.w3.org/XML/1998/namespace",E=function(e){return e.ownerDocument},N=function(e){var t=[],n=function(e,t){var n,r,o=[];for(r=0;r<e.length;r++)n=e.item(r),!1!==U(n.nodeType,t)&&o.push(n);return o};switch(e.nodeType){case 1:t=n(e.childNodes,supportedChildNodeTypes=[1,3,4,7,8]);break;case 9:t=n(e.childNodes,supportedChildNodeTypes=[1,7,8]);break;case 2:case 3:case 4:case 7:case 8:case 13:break;default:throw new Error("Internal Error: nodeChildren - unsupported node type: "+e.nodeType)}return t},D=function(e){var t,n,r=[];for(t=N(e),n=0;n<t.length;n++)r.push(t[n]),r.push.apply(r,D(t[n]));return r},T=function(e){switch(e.nodeType){case 1:case 3:case 4:case 7:case 8:case 9:return e.parentNode;case 2:return e.ownerElement?e.ownerElement:Y(e.ownerDocument,!0,function(t,n){if(n===e)return!0});case 13:return e.ownerElement;default:throw new Error("Internal Error: nodeParent - node type not supported: "+e.type)}},x=function(e){for(var t,n=[];t=T(e);)n.push(t),e=t;return n},R=function(e){return A(e,"nextSibling")},S=function(e){return A(e,"previousSibling")},A=function(e,t){for(var n,r=[];n=e[t];){switch(n.nodeType){case 1:case 3:case 4:case 7:case 8:case 9:r.push(n)}e=n}return r},_=function(e){var t,n,r,o,i=[];for((t=x(e)).unshift(e),n=0;n<t.length;n++)for(r=R(t[n]),o=0;o<r.length;o++)i.push(r[o]),i.push.apply(i,D(r[o]));return i},O=function(e){var t,n,r,o,i=[];for((t=x(e)).unshift(e),n=0;n<t.length;n++)for(r=S(t[n]),o=0;o<r.length;o++)i.push.apply(i,D(r[o]).reverse()),i.push(r[o]);return i},E=function(e){switch(e.nodeType){case 9:return e;default:return e.ownerDocument}},P=function(e){var t,n=[];if(1===e.nodeType)for(t=0;t<e.attributes.length;t++)e.attributes[t].specified&&n.push(e.attributes[t]);return n.length>1&&n[0].compareDocumentPosition&&n.sort(function(e,t){var n=e.compareDocumentPosition(t);return 2==(2&n)?1:4==(4&n)?-1:0}),n},F=function(e){var t,n=P(e),r=[];for(t=0;t<n.length;t++)!1===M(n[t])&&r.push(n[t]);return r},C=function(e,t){var n,r,o,i,s=t||[];if(1===e.nodeType){if(e.ownerDocument.documentElement===e&&"object"==typeof e.ownerDocument.namespaces)for(r=e.ownerDocument.namespaces.length-1;r>=0;r--)i=e.ownerDocument.namespaces.item(r),I.call(this,s,i.name,i.urn,e);for(r=(n=P(e)).length-1;r>=0;r--)!1!==(o=M(n[r]))&&(1!==o.length?I.call(this,s,o[1],n[r].nodeValue,e):I.call(this,s,"",n[r].nodeValue,e));if(C.call(this,e.parentNode,s),void 0===t&&(I.call(this,s,"xml",y,e),s[0]&&""===s[0].prefix&&""===s[0].namespaceURI&&s.shift()),void 0===t)for(r=0;r<s.length;r++)s[r].ownerElement!==e&&(s[r]=$(s[r].prefix,s[r].nodeValue,e))}return s},I=function(e,t,n,r){var o,i;for(this.opts["case-sensitive"]||(t=t.toLowerCase()),o=0;o<e.length;o++)if(e[o].prefix===t)return!1;return i=$(t,n,r),""===t&&null!==n?e.unshift(i):e.push(i),!0},M=function(e){var t=e.nodeName.split(":");return"xmlns"===t[0]&&t},k=function(e,t){var n,r,o,i,s,a;if(1===e.nodeType)for(o=t?[t]:F(e),i=C.call(this,e),n=0;n<o.length;n++){for(1===(a=o[n].nodeName.split(":")).length&&(a[1]=a[0],a[0]=""),s=null,r=0;r<i.length;r++)if(i[r].prefix===a[0]){s=i[r].namespaceURI;break}if(null===s&&(s=""),this.opts["unique-ids"][s]===a[1])return o[n]}return null},Y=function(e,t,n){var r,o,i,s,a=[];for(i=e.getElementsByTagName("*"),r=0;r<i.length;r++)if(1==(s=i.item(r)).nodeType)for(o=0;o<s.attributes.length;o++)if(s.attributes[o].specified&&!0===n(s,s.attributes[o])){if(t)return s;a.push(s);break}return t?null:a},B=function(e){var t,n,r,o;switch(e.nodeType){case 1:for(o=void 0===e.scopeName||document.addEventListener?1==(t=e.nodeName.split(":")).length?{prefix:"",name:t[0]}:{prefix:t[0],name:t[1]}:{prefix:"HTML"==e.scopeName?"":e.scopeName,name:e.nodeName},this.opts["case-sensitive"]||(o.prefix=o.prefix.toLowerCase(),o.name=o.name.toLowerCase()),n=C.call(this,e),r=0;r<n.length;r++)if(n[r].prefix===o.prefix)return o.ns=n[r].namespaceURI,o;if(""===o.prefix)return o.ns=null,o;throw new Error('Internal Error: nodeExpandedName - Failed to expand namespace prefix "'+o.prefix+'" on element: '+e.nodeName);case 2:if(1==(t=e.nodeName.split(":")).length)return{prefix:"",ns:null,name:t[0]};for(o={prefix:t[0],name:t[1]},this.opts["case-sensitive"]||(o.prefix=o.prefix.toLowerCase(),o.name=o.name.toLowerCase()),n=C.call(this,T(e)),r=0;r<n.length;r++)if(n[r].prefix===o.prefix)return o.ns=n[r].namespaceURI,o;throw new Error('Internal Error: nodeExpandedName - Failed to expand namespace prefix "'+o.prefix+'" on attribute: '+e.nodeName);case 13:return{prefix:null,ns:null,name:this.opts["case-sensitive"]?e.prefix.toLowerCase():e.prefix};case 7:return{prefix:null,ns:null,name:this.opts["case-sensitive"]?e.target.toLowerCase():e.target};default:return!1}},X=function(e){var t,n,r="";switch(e.nodeType){case 9:case 1:for((n=a(new l(e,1,1,{},{},{}),{type:"step",args:["descendant",{type:"nodeType",args:["text",[]]}]})).sortDocumentOrder(),t=0;t<n.value.length;t++)r+=n.value[t].data;return r;case 2:return e.nodeValue;case 13:return e.namespaceURI;case 7:case 8:case 3:case 4:return e.data;default:throw new Error("Internal Error: nodeStringValue does not support node type: "+e.nodeType)}},j=function(e,t,n){var r=new Error(n);return r.name=t,r.code=e,r},U=function(e,t){for(var n=t.length;n--;)if(t[n]===e)return n;return!1},V=function(e,t,n,r){var o,i,s,a,u;if(e instanceof g)if(t instanceof g){for(a=t.stringValues(),s=e.stringValues(),o=0;o<s.length;o++)for(i=0;i<a.length;i++)if((u=V(s[o],a[i],n,r)).toBoolean())return u}else if(t instanceof d){for(s=e.stringValues(),o=0;o<s.length;o++)if((u=V(new d(s[o].toNumber()),t,n,r)).toBoolean())return u}else if(t instanceof DateType||t instanceof h&&t.isDateString()){for(t instanceof h&&(t=new DateType(t)),s=e.stringValues(),o=0;o<s.length;o++)if((u=V(new DateType(s[o].toDate()),t,n,r)).toBoolean())return u}else{if(!(t instanceof h))return V(new p(e.toBoolean()),t,n,r);for(s=e.stringValues(),o=0;o<s.length;o++)if((u=V(s[o],t,n,r)).toBoolean())return u}else if(t instanceof g)if(e instanceof d){for(a=t.stringValues(),o=0;o<a.length;o++)if((u=V(e,new d(a[o].toNumber()),n,r)).toBoolean())return u}else if(e instanceof DateType||e instanceof h&&e.isDateString()){for(e instanceof h&&(e=new DateType(e)),a=t.stringValues(),o=0;o<a.length;o++)if((u=V(e,new DateType(a[o].toDate()),n,r)).toBoolean())return u}else{if(!(e instanceof h))return V(e,new p(t.toBoolean()),n,r);for(a=t.stringValues(),o=0;o<a.length;o++)if((u=V(e,a[o],n,r)).toBoolean())return u}else switch(n){case"=":case"!=":return new p(e instanceof p||t instanceof p?r(e.toBoolean(),t.toBoolean()):e instanceof d||t instanceof d?r(e.toNumber(),t.toNumber()):r(e.toString(),t.toString()));default:return new p(r(e.toNumber(),t.toNumber()))}return new p(!1)},L=function(e){switch(e.nodeType){case 2:case 3:case 4:case 7:case 8:return T(e);case 1:case 9:return e;case 13:default:throw new Error("Internal Error: getComparableNode - Node type not supported: "+e.nodeType)}},H=function(e,t){var n,r,o;if(13==e.nodeType&&13==t.nodeType&&e.ownerElement==t.ownerElement){if(e===t)return 0;for(r=C.call(m,e.ownerElement),o=0;o<r.length;o++){if(r[o]===e){n=4;break}if(r[o]===t){n=2;break}}}else 13==e.nodeType&&(e=e.ownerElement),13==t.nodeType&&(t=t.ownerElement),n=z(e,t);return n},z=function(e,t){var n,r,o,i,s,a=function(e,t,n,r,o,i,s,a,u){return 0===o||(o&i)===i?a+i:(o&s)===s?u:o};if(e.compareDocumentPosition)return e.compareDocumentPosition(t);if(e===t)return 0;if(n=L(e),r=L(t),9===n.nodeType)if(9===r.nodeType){if(n!==r)return 1;o=0}else{if(n!==r.ownerDocument)return 1;o=20}else if(9===r.nodeType){if(r!==n.ownerDocument)return 1;o=10}else{if(n.ownerDocument!==r.ownerDocument)return 1;if(!n.contains||void 0===n.sourceIndex||!r.contains||void 0===r.sourceIndex)throw new Error('Cannot compare elements. Neither "compareDocumentPosition" nor "contains" available.');o=(n!=r&&n.contains(r)&&16)+(n!=r&&r.contains(n)&&8)+(n.sourceIndex>=0&&r.sourceIndex>=0?(n.sourceIndex<r.sourceIndex&&4)+(n.sourceIndex>r.sourceIndex&&2):1)+0}if(e===n&&t===r)return o;if(e===n)return a(0,0,0,0,o,16,8,4,2);if(t===r)return a(0,0,0,0,o,8,16,2,4);if(16==(16&o))return 4;if(8==(8&o))return 2;if(0===o){for(i=0;i<n.attributes.length;i++)if((s=n.attributes[i]).specified){if(s===t)return 2;if(s===e)return 4}throw new Error("Internal Error: compareDocumentPosition failed to sort attributes.")}return o},q=function(e){if(!e)throw j(9,"NOT_SUPPORTED_ERR","Context node was not supplied.");if(9!=e.nodeType&&1!=e.nodeType&&2!=e.nodeType&&3!=e.nodeType&&4!=e.nodeType&&8!=e.nodeType&&7!=e.nodeType&&13!=e.nodeType)throw j(9,"NOT_SUPPORTED_ERR","The supplied node type is not supported. (nodeType: "+e.nodeType+")");if(2==e.nodeType&&!e.specified)throw j(9,"NOT_SUPPORTED_ERR","The supplied node is a non-specified attribute node. Only specified attribute nodes are supported.")},$=function(e,t,n){var r,o;for(r=0;r<b.length;r++)if((o=b[r]).prefix===e&&o.nodeValue===t&&o.ownerElement===n)return o;return o=new i(e,t,n),b.push(o),o};return f=function(e,t,n){this.value=e,this.type=t,this.supports=n},f.prototype={value:null,type:null,supports:[],toBoolean:function(){throw new Error('Unable to convert "'+this.type+'" to "boolean".')},toString:function(){throw new Error('Unable to convert "'+this.type+'" to "string".')},toNumber:function(){throw new Error('Unable to convert "'+this.type+'" to "number".')},toNodeSet:function(){throw new Error('Unable to convert "'+this.type+'" to "node-set".')},toDate:function(){throw new Error('Unable to convert "'+this.type+'" to "date".')},canConvertTo:function(e){return!1!==U(e,this.supports)}},p=function(e){f.call(this,e,"boolean",["boolean","string","number","date"])},p.prototype=new f,p.constructor=p,p.prototype.toBoolean=function(){return this.value},p.prototype.toString=function(){return!0===this.value?"true":"false"},p.prototype.toNumber=function(){return this.value?1:0},p.prototype.toDate=function(){return null},g=function(e,t){f.call(this,e,"node-set",["boolean","string","number","node-set","date"]),this.docOrder=t||"unsorted"},g.prototype=new f,g.constructor=g,g.prototype.toBoolean=function(){return this.value.length>0},g.prototype.toString=function(){return this.value.length<1?"":(this.sortDocumentOrder(),X(this.value[0]))},g.prototype.toNumber=function(){return new h(this.toString()).toNumber()},g.prototype.toNodeSet=function(){return this.value},g.prototype.toDate=function(){return new h(this.toString()).toDate()},g.prototype.sortDocumentOrder=function(){switch(this.docOrder){case"document-order":break;case"reverse-document-order":this.value.reverse();break;default:this.value.sort(function(e,t){var n=H(e,t);if(4==(4&n))return-1;if(2==(2&n))return 1;throw new Error("NodeSetType.sortDocumentOrder - unexpected compare result: "+n)})}this.docOrder="document-order"},g.prototype.sortReverseDocumentOrder=function(){switch(this.docOrder){case"document-order":this.value.reverse();break;case"reverse-document-order":break;default:this.sortDocumentOrder(),this.value.reverse()}this.docOrder="reverse-document-order"},g.prototype.append=function(e){var t,n=0,r=0;if(!e instanceof g)throw new Error("NodeSetType can be passed into NodeSetType.append method");for(this.sortDocumentOrder(),e.sortDocumentOrder();n<this.value.length&&r<e.value.length;)if(0==(t=H(this.value[n],e.value[r])))r++;else if(4==(4&t))n++;else{if(2!=(2&t))throw new Error("Internal Error: NodeSetType.append - unable to sort nodes. (result: "+t+")");this.value.splice(n,0,e.value[r]),n++,r++}for(;r<e.value.length;r++)this.value.push(e.value[r]);this.docOrder="document-order"},g.prototype.stringValues=function(){var e,t,n=[];for(e=0;e<this.value.length;e++)(t=new h(X(this.value[e]))).isDateString()&&(t=new DateType(t.value)),n.push(t);return n},h=function(e){f.call(this,e,"string",["boolean","string","number","date"])},h.prototype=new f,h.constructor=h,h.prototype.toBoolean=function(){return this.value.length>0},h.prototype.toString=function(){return this.value},h.prototype.toNumber=function(){var e;return this.isDateString(this.value)?new DateType(this.value).toNumber():null!==(e=this.value.match(/^[ \t\r\n]*(-?[0-9]+(?:[.][0-9]*)?)[ \t\r\n]*$/))?parseFloat(e[1]):null!==(e=this.value.match(/^[ \t\r\n]*(-?[.][0-9]+)[ \t\r\n]*$/))?parseFloat(e[1]):Number.NaN},h.prototype.toDate=function(){return new Date(this.value)},h.prototype.isDateString=function(){return!!isNaN(this.value)&&(!isNaN(Date.parse(this.value))&&!!/('|")?[0-9]{4}(-|\/)[0-9]{2}(-|\/)[0-9]{2}('|")?/.test(this.value))},d=function(e){f.call(this,e,"number",["boolean","string","number","date"])},d.prototype=new f,d.constructor=d,d.prototype.toBoolean=function(){return 0!==this.value&&!isNaN(this.value)},d.prototype.toString=function(){return this.value.toString()},d.prototype.toNumber=function(){return this.value},d.prototype.toDate=function(){return new Date(864e5*this.value)},DateType=function(e){f.call(this,e,"date",["date","string","number","boolean"])},DateType.prototype=new f,DateType.constructor=DateType,DateType.prototype.toDate=function(){return new Date(this.value)},DateType.prototype.toString=function(){return new Date(this.value).toISOLocalString()},DateType.prototype.toNumber=function(){return new Date(this.value).getTime()/864e5},DateType.prototype.toBoolean=function(){return!isNaN(new Date(this.value).getTime())},e=function(t,n){var r;switch(this.code=t,this.code){case e.INVALID_EXPRESSION_ERR:this.name="INVALID_EXPRESSION_ERR";break;case e.TYPE_ERR:this.name="TYPE_ERR";break;default:throw r=new Error("Unsupported XPathException code: "+this.code),r.name="XPathExceptionInternalError",r}this.message=n||""},e.prototype.toString=function(){return'XPathException: "'+this.message+'", code: "'+this.code+'", name: "'+this.name+'"'},e.INVALID_EXPRESSION_ERR=51,e.TYPE_ERR=52,t=function(e){var t,n,r;for(t in e){r=!1;for(n in this.opts)if(t===n){this.opts[t]=e[t],r=!0;break}if(!r)throw new Error("Unsupported option: "+t)}this.opts["unique-ids"][y]="id",this.opts["unique-ids"]["http://www.w3.org/1999/xhtml"]="id"},t.prototype={opts:{"unique-ids":{},"case-sensitive":!1},createExpression:function(t,r){var o,i,s,a,u={};try{o=XPathJS._parser.parse(t)}catch(t){throw i="The expression is not a legal expression.",t instanceof XPathJS._parser.SyntaxError?i+=" (line: "+t.line+", character: "+t.column+")":i+=" ("+t.message+")",new e(e.INVALID_EXPRESSION_ERR,i)}if(o.nsPrefixes.length>0){if("object"!=typeof r||void 0===r.lookupNamespaceURI)throw new e(e.INVALID_EXPRESSION_ERR,"No namespace resolver provided or lookupNamespaceURI function not supported.");for(s=0;s<o.nsPrefixes.length;s++)if(a=o.nsPrefixes[s],u[a]=r.lookupNamespaceURI(a),null===u[a])throw j(14,"NAMESPACE_ERR",'Undefined namespace prefix "'+a+'" in the context of the given resolver.')}return new n(o,u,this.opts)},createNSResolver:function(e){return new r(e)},evaluate:function(e,t,n,r,o){return(e=this.createExpression(e,n)).evaluate(t,r,o)}},n=function(e,t,n){this.parsedExpression=e,this.namespaceMapping=t,this.opts=n||{}},n.prototype={parsedExpression:null,namespaceMapping:null,opts:{},evaluate:function(e,t,n){var r;return m=this,q(e),r=new l(e,1,1,{},c,this.namespaceMapping,this.opts),o.factory(r,t,a(r,this.parsedExpression.tree))}},l=function(e,t,n,r,o,i,s){this.node=e,this.pos=t,this.size=n,this.vars=r,this.fns=o,this.nsMap=i,this.opts=s||{}},l.prototype={node:null,pos:null,size:null,vars:null,fns:null,nsMap:null,opts:null,clone:function(e,t,n){return new l(e||this.node,void 0!==t?t:this.pos,void 0!==n?n:this.size,this.vars,this.fns,this.nsMap,this.opts)}},r=function(e){q(e),this.node=e},r.prototype={node:null,lookupNamespaceURI:function(e){var t,n,r,o=this.node;switch(e){case"xml":return y;case"xmlns":return"http://www.w3.org/2000/xmlns/";default:switch(this.node.nodeType){case 9:o=o.documentElement;break;case 1:break;default:o=T(o)}if(null!=o&&1==o.nodeType){if(""==e){if(null!==(n=o.getAttribute("xmlns")))return n}else{if(o.ownerDocument.documentElement===o&&"object"==typeof o.ownerDocument.namespaces)for(t=0;t<o.ownerDocument.namespaces.length;t++)if((n=o.ownerDocument.namespaces.item(t)).name==e)return n.urn;for(t=0;t<o.attributes.length;t++)if(o.attributes[t].specified&&"xmlns:"+e==o.attributes[t].nodeName)return o.attributes[t].nodeValue}if(o.ownerDocument.documentElement!==o&&o.parentNode)return r=this.node,this.node=o.parentNode,n=this.lookupNamespaceURI(e),this.node=r,n}return null}}},u={"/":function(e,t){var n,r,o,i,s;if(null===e)r=new g([E(this.node)],"document-order");else if(!(r=a(this,e))instanceof g)throw new Error("Left side of path separator (/) must be of node-set type. (type: "+r.type+")");if(null===t)i=r;else for(i=new g([],"document-order"),n=0;n<r.value.length;n++){if(s=this.clone(r.value[n]),!(o=a(s,t))instanceof g)throw new Error("Right side of path separator (/) must be of node-set type. (type: "+o.type+")");i.append(o)}return i},step:function(e,t){var n,r,o,i,s,u,c;switch(e){case"child":n=new g(N(this.node),"document-order");break;case"descendant":n=new g(D(this.node),"document-order");break;case"parent":o=T(this.node),n=new g(o?[o]:[],"document-order");break;case"ancestor":n=new g(x(this.node),"reverse-document-order");break;case"following-sibling":n=new g(R(this.node),"document-order");break;case"preceding-sibling":n=new g(S(this.node),"reverse-document-order");break;case"following":n=new g(_(this.node),"document-order");break;case"preceding":n=new g(O(this.node),"reverse-document-order");break;case"attribute":n=new g(F(this.node),"document-order");break;case"namespace":n=new g(C.call(this,this.node),"document-order");break;case"self":n=new g([this.node],"document-order");break;case"descendant-or-self":(i=D(this.node)).unshift(this.node),n=new g(i,"document-order");break;case"ancestor-or-self":(i=x(this.node)).unshift(this.node),n=new g(i,"reverse-document-order");break;default:throw new Error("Axis type not supported: "+e)}switch(t.type){case"nodeType":if("node"==t.args[0])break;for(r=n.value.length-1;r>=0;r--)switch(t.args[0]){case"text":3!=n.value[r].nodeType&&4!=n.value[r].nodeType&&n.value.splice(r,1);break;case"comment":8!=n.value[r].nodeType&&n.value.splice(r,1);break;case"processing-instruction":(7!=n.value[r].nodeType||t.args[1].length>0&&a(this,t.args[1][0])!=n.value[r].nodeName)&&n.value.splice(r,1)}break;case"name":switch(s=a(this,t),e){case"attribute":u=2;break;case"namespace":u=13;break;default:u=1}for(r=n.value.length-1;r>=0;r--)n.value[r].nodeType==u?null===s.ns&&null===s.name||(!1!==(c=B.call(this,n.value[r]))&&c.ns===s.ns?null!==s.name&&c.name.toLowerCase()!=s.name.toLowerCase()&&n.value.splice(r,1):n.value.splice(r,1)):n.value.splice(r,1);break;default:throw new Error("NodeTest type not supported in step: "+t.type)}return n},predicate:function(e,t,n){var r,o,i,s,u,c;if(!(r=a(this,t))instanceof g)throw new Error('Expected "node-set", got: '+r.type);switch(e){case"ancestor":case"ancestor-or-self":case"preceding":case"preceding-sibling":r.sortReverseDocumentOrder();break;default:r.sortDocumentOrder()}for(s=0;s<n.length;s++)for(o=0,u=1,c=r.value.length;o<r.value.length;u++){if((i=a(this.clone(r.value[o],u,c),n[s]))instanceof d){if(i.value!=u){r.value.splice(o,1);continue}}else if(!i.toBoolean()){r.value.splice(o,1);continue}o++}return r},function:function(e,t){var n,r,o,i,s=[],u=function(e){return(null!==e.ns?"{"+e.ns+"}":"{}")+e.name},c=function(e){var t,n,r=[];for(t=0;t<e.length;t++)n=void 0===e[t].t?"object":e[t].t,!1!==e[t].r?!0===e[t].rep&&(n+="+"):!0===e[t].rep?n+="*":n+="?",r.push(n);return"("+r.join(", ")+")"},l=0,p=[];if(null===(n=a(this,e)).ns&&(n.ns=""),!this.fns[n.ns]||!this.fns[n.ns][n.name])throw new Error('Function "'+u(n)+'" does not exist.');for((r=this.fns[n.ns][n.name]).args||(r.args=[]),o=0,l=0;o<r.args.length;l++,o++){if(void 0===t[l]){if(!1!==r.args[o].r)throw new Error('Function "'+u(n)+'" expects '+c(r.args)+".")}else p.push(void 0===r.args[o].t?"object":r.args[o].t);if(!0===r.args[o].rep){for(;l<t.length;l++)p.push(void 0===r.args[o].t?"object":r.args[o].t);break}}if(p.length<t.length)throw new Error('Function "'+u(n)+'" expects '+c(r.args)+".");for(o=0;o<t.length;o++){if(i=a(this,t[o]),"object"!==p[o]&&!i.canConvertTo(p[o]))throw new Error('Function "'+u(n)+'" expects '+c(r.args)+'.Cannot convert "'+i.type+'" to "'+p[o]+'".');s.push(i)}if(result=r.fn.apply(this,s),!result instanceof f)throw new Error('Function "'+u(n)+'" did not return a value that inherits from BaseType.');if("object"!==r.ret&&!result.canConvertTo(r.ret))throw new Error('Function "'+u(n)+'" return "'+result.type+'" type that cannot be converted to "'+r.ret+'".');return result},"|":function(e,t){if(e=a(this,e),t=a(this,t),void 0===e||void 0===t||!e instanceof g||!t instanceof g)throw new Error('Unable to perform union on non-"node-set" types.');return e.append(t),e},or:function(e,t){return new p(a(this,e).toBoolean()?!0:a(this,t).toBoolean())},and:function(e,t){return new p(a(this,e).toBoolean()?a(this,t).toBoolean():!1)},"=":function(e,t){return V.call(this,a(this,e),a(this,t),"=",function(e,t){return e==t})},"!=":function(e,t){return V.call(this,a(this,e),a(this,t),"!=",function(e,t){return e!=t})},"<=":function(e,t){return V.call(this,a(this,e),a(this,t),"<=",function(e,t){return e<=t})},"<":function(e,t){return V.call(this,a(this,e),a(this,t),"<",function(e,t){return e<t})},">=":function(e,t){return V.call(this,a(this,e),a(this,t),">=",function(e,t){return e>=t})},">":function(e,t){return V.call(this,a(this,e),a(this,t),">",function(e,t){return e>t})},"+":function(e,t){return new d(a(this,e).toNumber()+a(this,t).toNumber())},"-":function(e,t){return new d(a(this,e).toNumber()-a(this,t).toNumber())},div:function(e,t){return new d(a(this,e).toNumber()/a(this,t).toNumber())},mod:function(e,t){return new d(a(this,e).toNumber()%a(this,t).toNumber())},"*":function(e,t){return new d(a(this,e).toNumber()*a(this,t).toNumber())},string:function(e){return new h(e)},number:function(e){return new d(e)},$:function(e){throw new Error("TODO: Not implemented.16")},name:function(e,t){var n=null;if(null!==e&&!(n=this.nsMap[e]))throw new Error('Namespace prefix "'+e+'" is not mapped to a namespace.');return{ns:n,name:t}}},c={"":{last:{fn:function(){return new d(this.size)},ret:"number"},count:{fn:function(e){return new d(e.toNodeSet().length)},args:[{t:"node-set"}],ret:"number"},id:{fn:function(e){var t,n,r,o=this,i=[],s=[],a=function(e){var t,n=e.split(/[\u0020\u0009\u000D\u000A]+/);for(t=n.length-1;t>=0;t--)0==n[t].length&&n.splice(t,1);return n};if(e instanceof g)for(t=0;t<e.value.length;t++)i.push.apply(i,a(X(e.value[t])));else e=e.toString(),i=a(e);for(t=i.length-1;t>=0;t--)for(n=t-1;n>=0;n--)if(i[t]==i[n]&&t!=n){i.splice(t,1);break}for(t=0;t<i.length;t++)(r=E(this.node).getElementById(i[t]))&&k.call(this,r)?s.push(r):Y(E(this.node),!0,function(e,n){var r=k.call(o,e,n);if(r&&r.nodeValue==i[t])return s.push(e),!0});return new g(s)},args:[{}],ret:"node-set"},"local-name":{fn:function(e){var t,n="";return 0==arguments.length&&(e=new g([this.node])),e.toNodeSet().length>0&&(e.sortDocumentOrder(),!1!==(t=B.call(this,e.value[0]))&&(n=t.name)),new h(n)},args:[{t:"node-set",r:!1}],ret:"string"},"namespace-uri":{fn:function(e){var t,n="";return 0==arguments.length&&(e=new g([this.node])),e.toNodeSet().length>0&&(e.sortDocumentOrder(),!1!==(t=B.call(this,e.value[0]))&&null!==t.ns&&(n=t.ns)),new h(n)},args:[{t:"node-set",r:!1}],ret:"string"},name:{fn:function(e){var t,n="";return 0==arguments.length&&(e=new g([this.node])),e.toNodeSet().length>0&&(e.sortDocumentOrder(),!1!==(t=B.call(this,e.value[0]))&&(n=t.prefix&&t.prefix.length>0?t.prefix+":"+t.name:t.name)),new h(n)},args:[{t:"node-set",r:!1}],ret:"string"},string:{fn:function(e){return 0==arguments.length&&(e=new g([this.node],"document-order")),new h(e.toString())},args:[{t:"object",r:!1}],ret:"string"},"starts-with":{fn:function(e,t){return new p(e.toString().substr(0,(t=t.toString()).length)==t)},args:[{t:"string"},{t:"string"}],ret:"string"},contains:{fn:function(e,t){return new p(-1!=e.toString().indexOf(t=t.toString()))},args:[{t:"string"},{t:"string"}],ret:"string"},"substring-before":{fn:function(e,t){return e=e.toString(),t=e.indexOf(t.toString()),new h(-1==t?"":e.substr(0,t))},args:[{t:"string"},{t:"string"}],ret:"string"},"substring-after":{fn:function(e,t){var n;return e=e.toString(),t=t.toString(),n=e.indexOf(t),new h(-1==n?"":e.substr(n+t.length))},args:[{t:"string"},{t:"string"}],ret:"string"},substring:{fn:function(e,t,n){return e=e.toString(),t=Math.round(t.toNumber())-1,new h(isNaN(t)?"":2==arguments.length?e.substring(t<0?0:t):e.substring(t<0?0:t,t+Math.round(n.toNumber())))},args:[{t:"string"},{t:"number"},{t:"number",r:!1}],ret:"string"},"string-length":{fn:function(e){return e=0==arguments.length?X(this.node):e.toString(),new d(e.length)},args:[{t:"string",r:!1}],ret:"number"},"normalize-space":{fn:function(e){return e=0==arguments.length?X(this.node):e.toString(),new h(e.replace(/^[\u0020\u0009\u000D\u000A]+/,"").replace(/[\u0020\u0009\u000D\u000A]+$/,"").replace(/[\u0020\u0009\u000D\u000A]+/g," "))},args:[{t:"string",r:!1}],ret:"string"},translate:{fn:function(e,t,n){var r,o,i,s="";for(e=e.toString(),t=t.toString(),n=n.toString(),r=0;r<e.length;r++)(-1==(o=t.indexOf(i=e.charAt(r)))||(i=n.charAt(o)))&&(s+=i);return new h(s)},args:[{t:"string"},{t:"string"},{t:"string"}],ret:"string"},boolean:{fn:function(e){return new p(e.toBoolean())},args:[{r:!0}],ret:"boolean"},not:{fn:function(e){return new p(!e.toBoolean())},args:[{t:"boolean"}],ret:"boolean"},true:{fn:function(){return new p(!0)},ret:"boolean"},false:{fn:function(){return new p(!1)},ret:"boolean"},lang:{fn:function(e){for(var t,n,r,o,i,s,a,u=this.node,c=e.toString().toLowerCase().split("-");9!=u.nodeType;u=T(u))for(t=F(u),i=0;i<t.length;i++)if(1===(n=t[i].nodeName.split(":")).length&&(n[1]=n[0],n[0]=""),"lang"==n[1]){if((r=t[i].nodeValue.toLowerCase().split("-")).length<c.length)continue;for(a=!0,s=0;s<c.length;s++)if(c[s]!=r[s]){a=!1;break}if(a)for(o=C.call(this,u),s=0;s<o.length;s++)if(o[s].prefix==n[0]&&o[s].nodeValue==y)return new p(!0)}return new p(!1)},args:[{t:"string"}],ret:"boolean"},number:{fn:function(e){return 0==arguments.length&&(e=new g([this.node],"document-order")),new d(e.toNumber())},args:[{t:"object",r:!1}],ret:"number"},sum:{fn:function(e){var t,n=0;for(e=e.toNodeSet(),t=0;t<e.length;t++)n+=new h(X(e[t])).toNumber();return new d(n)},args:[{t:"node-set"}],ret:"number"},floor:{fn:function(e){return new d(Math.floor(e))},args:[{t:"number"}],ret:"number"},ceiling:{fn:function(e){return new d(Math.ceil(e))},args:[{t:"number"}],ret:"number"},"count-non-empty":{fn:function(e){var t,n=0;for(e=e.toNodeSet(),t=0;t<e.length;t++)new h(X(e[t])).toString().length>0&&n++;return new d(n)},args:[{t:"node-set"}],ret:"number"},position:{fn:function(e){if(e){var t,n,r;if(1===(e=e.toNodeSet()).length){for(r=1,n=(t=e[0]).tagName;t.previousElementSibling&&t.previousElementSibling.tagName===n;)t=t.previousElementSibling,r++;return new d(r)}throw new Error("nodeset provided to position() contained multiple nodes")}return new d(this.pos)},args:[{t:"node-set",r:!1}],ret:"number"},concat:{fn:function(e){var t,n="";for(t=0;t<arguments.length;t++)n+=arguments[t]instanceof g?arguments[t].stringValues().join(""):arguments[t].toString();return new h(n)},args:[{t:"object",r:!1,rep:!0}],ret:"string"},round:{fn:function(e,t){return t=Math.round(t)||0,new d(Math.round(e*Math.pow(10,t))/Math.pow(10,t))},args:[{t:"number"},{t:"number",r:!1}],ret:"number"},selected:{fn:function(e,t){var n;return t=t.toString().trim(),n=e.toString(),new p(-1!=(" "+n+" ").indexOf(" "+t+" "))},args:[{t:"object"},{t:"string"}],ret:"boolean"},"selected-at":{fn:function(e,t){var n,r,o;return t=Math.round(t.toNumber()),n=e.toString(),r=n.split(" "),o=t>=0&&t<r.length?r[t]:"",new h(o)},args:[{t:"object"},{t:"number"}],ret:"string"},"count-selected":{fn:function(e){var t=[];return(e=e.toNodeSet()).length>0?(t=X(e[0]).trim().split(" "),new d(1==t.length&&""===t[0]?0:t.length)):new d(0)},args:[{t:"node-set"}],ret:"number"},checklist:{fn:function(e,t,n){var r,o,i=0;for(e=e.toNumber(),t=t.toNumber(),r=2;r<arguments.length;r++)if(arguments[r]instanceof g)for(o=0;o<arguments[r].stringValues().length;o++)!0===arguments[r].stringValues()[o].toBoolean()&&i++;else!0===arguments[r].toBoolean()&&i++;return new p((e<0||i>=e)&&(t<0||i<=t))},args:[{t:"number"},{t:"number"},{t:"object"},{t:"object",r:!1,rep:!0}],ret:"boolean"},"weighted-checklist":{fn:function(e,t,n,r){var o,i=[],s=[],a=0;for(e=e.toNumber(),t=t.toNumber(),o=2;o<arguments.length;o+=2)v=arguments[o],w=arguments[o+1],v&&w&&(v instanceof g?i=i.concat(v.stringValues()):i.push(v),w instanceof g?s=s.concat(w.stringValues()):s.push(w));for(o=0;o<i.length;o++)!0===i[o].toBoolean()&&(a+=s[o].toNumber());return new p((e<0||a>=e)&&(t<0||a<=t))},args:[{t:"number"},{t:"number"},{t:"object"},{t:"object"},{t:"object",r:!1,rep:!0}],ret:"boolean"},"boolean-from-string":{fn:function(e){return new p("true"===e.toString().toLowerCase()||"1"===String(e))},args:[{t:"string"}],ret:"boolean"},if:{fn:function(e,t,n){return e.toBoolean()?t:n},args:[{t:"object"},{t:"object"},{t:"object"}],ret:"object"},date:{fn:function(e){return new DateType(e.toDate())},args:[{t:"object"}],ret:"string"},"date-time":{fn:function(e){return new DateType(e.toDate())},args:[{t:"object"}],ret:"string"},"decimal-date-time":{fn:function(e){return new DateType(e.toDate())},args:[{t:"object"}],ret:"string"},today:{fn:function(){var e=new Date;return new DateType(new Date(e.getFullYear(),e.getMonth(),e.getDate()))},ret:"string"},now:{fn:function(){return new DateType(new Date)},ret:"string"},regex:{fn:function(e,t){var n,r;return n=e.toString(),r=new RegExp(t),new p(r.test(n))},args:[{t:"object"},{t:"string"}],ret:"boolean"},uuid:{fn:function(){var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)});return new h(e)},ret:"string"},int:{fn:function(e){return new d(e.toNumber()>=0?Math.floor(e.toNumber()):-Math.floor(Math.abs(e.toNumber())))},args:[{t:"string"}],ret:"number"},substr:{fn:function(e,t,n){return e=e.toString(),length=e.length,t=Math.round(t.toNumber()),n=n?Math.round(n.toNumber()):length,new h(isNaN(t)?"":e.substring(t<0?length+t:t,n<0?length+n:n))},args:[{t:"string"},{t:"number"},{t:"number",r:!1}],ret:"string"},random:{fn:function(){return new d(Math.random().toFixed(15))},ret:"number"},min:{fn:function(e,t){var n,r,o,i,s;for(n=0;n<arguments.length;n++)if(arguments[n]instanceof g){for(s=arguments[n].toNodeSet(),r=0;r<s.length;r++)(i=new h(X(s[r])))&&(o=o?Math.min(o,i.toNumber()):i.toNumber());0===s.length&&(o=NaN)}else(i=new h(arguments[n].toString()))&&(o=o?Math.min(o,i.toNumber()):i.toNumber());return new d(o)},args:[{t:"object"},{t:"object",r:!1,rep:!0}],ret:"number"},max:{fn:function(e,t){var n,r,o,i,s;for(n=0;n<arguments.length;n++)if(arguments[n]instanceof g){for(s=arguments[n].toNodeSet(),r=0;r<s.length;r++)(i=new h(X(s[r])))&&(o=o?Math.max(o,i.toNumber()):i.toNumber());0===s.length&&(o=NaN)}else(i=new h(arguments[n].toString()))&&(o=o?Math.max(o,i.toNumber()):i.toNumber());return new d(o)},args:[{t:"object"},{t:"object",r:!1,rep:!0}],ret:"number"},join:{fn:function(e,t){var n,r=[];for(n=1;n<arguments.length;n++)arguments[n]instanceof g?r=r.concat(arguments[n].stringValues()):r.push(arguments[n].toString());for(value=r[0]||"",n=1;n<r.length;n++)value+=e.toString()+r[n];return new h(value)},args:[{t:"string"},{t:"object",r:!1,rep:!0}],ret:"string"},coalesce:{fn:function(e,t){return e.toString().length>0?e:t},args:[{t:"object"},{t:"object"}],ret:"string"},"format-date":{fn:function(e,t){var n,r=(e=new DateType(e)).toDate(),o=t.toString(),i=function(e,t){var r=e.toString(),o=t-r.length;for(n=0;n<o;n++)r="0"+r;return r},s=window?window.enketoFormLocale:void 0;if(!e.toBoolean())return new h(r.toString());props={Y:r.getFullYear(),y:r.getFullYear().toString().substring(2,4),m:i(r.getMonth()+1,2),n:r.getMonth()+1,b:r.toLocaleDateString(s,{month:"short"}),d:i(r.getDate(),2),e:r.getDate(),H:i(r.getHours(),2),h:r.getHours(),M:i(r.getMinutes(),2),S:i(r.getSeconds(),2),3:i(r.getMilliseconds(),3),a:r.toLocaleDateString(s,{weekday:"short"})};for(prop in props)o=o.replace("%"+prop,props[prop]);return new h(o)},args:[{t:"date"},{t:"string"}],ret:"string"},pow:{fn:function(e,t){return new d(Math.pow(e,t))},args:[{t:"number"},{t:"number"}],ret:"number"},sin:{fn:function(e){return new d(Math.sin(e))},args:[{t:"number"}],ret:"number"},cos:{fn:function(e){return new d(Math.cos(e))},args:[{t:"number"}],ret:"number"},tan:{fn:function(e){return new d(Math.tan(e))},args:[{t:"number"}],ret:"number"},acos:{fn:function(e){return new d(Math.acos(e))},args:[{t:"number"}],ret:"number"},asin:{fn:function(e){return new d(Math.asin(e))},args:[{t:"number"}],ret:"number"},atan:{fn:function(e){return new d(Math.atan(e))},args:[{t:"number"}],ret:"number"},atan2:{fn:function(e,t){return new d(Math.atan2(e,t))},args:[{t:"number"},{t:"number"}],ret:"number"},log10:{fn:function(e){return new d(void 0!==Math.log10?Math.log10(e):Math.log(e)/Math.LN10)},args:[{t:"number"}],ret:"number"},log:{fn:function(e){return new d(Math.log(e))},args:[{t:"number"}],ret:"number"},pi:{fn:function(){return new d(Math.PI)},args:[],ret:"number"},exp:{fn:function(e){return new d(Math.exp(e))},args:[{t:"number"}],ret:"number"},exp10:{fn:function(e){return new d(Math.pow(10,e))},args:[{t:"number"}],ret:"number"},sqrt:{fn:function(e){return new d(Math.sqrt(e))},args:[{t:"number"}],ret:"number"},version:{fn:function(){var e=("#document"===this.node.nodeName?this.node.documentElement:this.node.ownerDocument.documentElement).attributes.version;return new h(e?e.textContent:"")},args:[],ret:"string"},once:{fn:function(e){var t=X(this.node),n=e.toString();return n="NaN"===n?"":n,new h(""!==t?t:n)},args:[{t:"string"}],ret:"string"},area:{fn:function(e){var t,n=[],r=[];if(e instanceof g&&e.value.length>1?e.value.forEach(function(e){n.push(X(e))}):e instanceof g?n=X(e.value[0]).split(";"):e instanceof h&&(n=e.value.split(";")),r=n.map(function(e){return e.trim().split(" ")}),r.every(function(e){return""!==e[0]&&e[0]>=-90&&e[0]<=90&&""!==e[1]&&e[1]>=-180&&e[1]<=180&&(void 0===e[2]||!isNaN(e[2]))&&(void 0===e[3]||!isNaN(e[3])&&e[3]>=0)})){var o,i,s=r.length,a=Math.PI/180;if(t=0,s>2){for(var u=0;u<s;u++)o={lat:r[u][0],lng:r[u][1]},t+=((i={lat:r[(u+1)%s][0],lng:r[(u+1)%s][1]}).lng-o.lng)*a*(2+Math.sin(o.lat*a)+Math.sin(i.lat*a));t=6378100*t*6378100/2}t=Math.abs(Math.round(100*t))/100}else t=Number.NaN;return new d(t)},args:[{t:"string"}],ret:"number"},"comment-status":{fn:function(e){var t,n=e.toString(),r="";if(n)try{(t=JSON.parse(n)).queries=Array.isArray(t.queries)?t.queries:[],t.logs=Array.isArray(t.logs)?t.logs:[],"object"==typeof t&&null!==t&&t.queries.concat(t.logs).some(function(e){return!("object"!=typeof e||null===e||!e.status)&&(r=e.status,!0)})}catch(e){console.error("Could not parse JSON from",n)}return new h(r)},args:[{t:"string"}],ret:"string"},"ends-with":{fn:function(e,t){return new p(e.toString().substr(e.toString().length-t.toString().length)===t.toString())},args:[{t:"string"},{t:"string"}],ret:"string"},abs:{fn:function(e){return new d(Math.abs(e))},args:[{t:"number"}],ret:"number"}}},c[""]["format-date-time"]=c[""]["format-date"],a=function(e,t){if("function"!=typeof u[t.type])throw new Error("Internal Error: Expression type does not exist: "+t.type);return u[t.type].apply(e,t.args)},o=function(t,n,r){switch(n){case o.NUMBER_TYPE:this.resultType=o.NUMBER_TYPE,this.numberValue=r.toNumber();break;case o.STRING_TYPE:this.resultType=o.STRING_TYPE,this.stringValue=r.toString();break;case o.BOOLEAN_TYPE:this.resultType=o.BOOLEAN_TYPE,this.booleanValue=r.toBoolean();break;case o.UNORDERED_NODE_ITERATOR_TYPE:case o.ORDERED_NODE_ITERATOR_TYPE:case o.UNORDERED_NODE_SNAPSHOT_TYPE:case o.ORDERED_NODE_SNAPSHOT_TYPE:case o.ANY_UNORDERED_NODE_TYPE:case o.FIRST_ORDERED_NODE_TYPE:if(!r instanceof g)throw new Error('Expected result of type "node-set", got: "'+r.type+'"');switch(this.resultType=n,n){case o.UNORDERED_NODE_ITERATOR_TYPE:case o.UNORDERED_NODE_SNAPSHOT_TYPE:this._value=r.toNodeSet(),this.snapshotLength=this._value.length;break;case o.ORDERED_NODE_ITERATOR_TYPE:case o.ORDERED_NODE_SNAPSHOT_TYPE:r.sortDocumentOrder(),this._value=r.toNodeSet(),this.snapshotLength=this._value.length;break;case o.ANY_UNORDERED_NODE_TYPE:r=r.toNodeSet(),this.singleNodeValue=r.length?r[0]:null;break;case o.FIRST_ORDERED_NODE_TYPE:r.sortDocumentOrder(),r=r.toNodeSet(),this.singleNodeValue=r.length?r[0]:null;break;default:throw new e(e.TYPE_ERR,"XPath result type not supported. (type: "+n+")")}break;default:throw new e(e.TYPE_ERR,"XPath result type not supported. (type: "+n+")")}},o.factory=function(t,n,r){var i;if(n!==o.ANY_TYPE)return new o(t,n,r);if(r instanceof g)i=new o(t,o.UNORDERED_NODE_ITERATOR_TYPE,r);else if(r instanceof d)i=new o(t,o.NUMBER_TYPE,r);else if(r instanceof p)i=new o(t,o.BOOLEAN_TYPE,r);else{if(!(r instanceof h))throw new e(e.TYPE_ERR,"Internal Error: Unsupported value type: "+typeof r);i=new o(t,o.STRING_TYPE,r)}return i},o.prototype={resultType:null,numberValue:null,stringValue:null,booleanValue:null,singleNodeValue:null,invalidIteratorState:null,snapshotLength:null,_iteratorIndex:0,iterateNext:function(){if(this.resultType!=o.UNORDERED_NODE_ITERATOR_TYPE&&this.resultType!=o.ORDERED_NODE_ITERATOR_TYPE)throw new e(e.TYPE_ERR,"iterateNext() method may only be used with results of type UNORDERED_NODE_ITERATOR_TYPE or ORDERED_NODE_ITERATOR_TYPE");return this._iteratorIndex<this._value.length?this._value[this._iteratorIndex++]:null},snapshotItem:function(t){if(this.resultType!=o.UNORDERED_NODE_SNAPSHOT_TYPE&&this.resultType!=o.ORDERED_NODE_SNAPSHOT_TYPE)throw new e(e.TYPE_ERR,"snapshotItem() method may only be used with results of type UNORDERED_NODE_SNAPSHOT_TYPE or ORDERED_NODE_SNAPSHOT_TYPE");return this._value[t]}},o.ANY_TYPE=0,o.NUMBER_TYPE=1,o.STRING_TYPE=2,o.BOOLEAN_TYPE=3,o.UNORDERED_NODE_ITERATOR_TYPE=4,o.ORDERED_NODE_ITERATOR_TYPE=5,o.UNORDERED_NODE_SNAPSHOT_TYPE=6,o.ORDERED_NODE_SNAPSHOT_TYPE=7,o.ANY_UNORDERED_NODE_TYPE=8,o.FIRST_ORDERED_NODE_TYPE=9,i=function(e,t,n){if(1!=n.nodeType)throw new Error("Internal Error: XPathNamespace owner element must be an Element node.");this.ownerElement=n,this.ownerDocument=n.ownerDocument,this.nodeName="#namespace",this.prefix=e,this.localName=e,this.nodeType=i.XPATH_NAMESPACE_NODE,this.namespaceURI=t,this.nodeValue=t},i.XPATH_NAMESPACE_NODE=13,s={XPathException:e,XPathEvaluator:t,XPathNSResolver:r,XPathExpression:n,XPathResult:o,XPathNamespace:i,getCurrentDomLevel3XPathBindings:function(){return{window:{XPathException:window.XPathException,XPathExpression:window.XPathExpression,XPathNSResolver:window.XPathNSResolver,XPathResult:window.XPathResult,XPathNamespace:window.XPathNamespace},document:{createExpression:document.createExpression,createNSResolver:document.createNSResolver,evaluate:document.evaluate}}},createDomLevel3XPathBindings:function(s){var a=new t(s);return{window:{XPathException:e,XPathExpression:n,XPathNSResolver:r,XPathResult:o,XPathNamespace:i},document:{createExpression:function(){return a.createExpression.apply(a,arguments)},createNSResolver:function(){return a.createNSResolver.apply(a,arguments)},evaluate:function(){return a.evaluate.apply(a,arguments)}}}},bindDomLevel3XPath:function(e,t){var n,r=t||s.createDomLevel3XPathBindings(),o=s.getCurrentDomLevel3XPathBindings(),e=e||document;for(n in r.window)window[n]=r.window[n];for(n in r.document)e[n]=r.document[n];return o}}}();XPathJS._parser=function(){"use strict";function e(t,n,r,o){this.message=t,this.expected=n,this.found=r,this.location=o,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}return function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}(e,Error),{SyntaxError:e,parse:function(t){function n(e){var n,r,o=lr[e];if(o)return o;for(n=e-1;!lr[n];)n--;for(o={line:(o=lr[n]).line,column:o.column,seenCR:o.seenCR};n<e;)"\n"===(r=t.charAt(n))?(o.seenCR||o.line++,o.column=1,o.seenCR=!1):"\r"===r||"\u2028"===r||"\u2029"===r?(o.line++,o.column=1,o.seenCR=!0):(o.column++,o.seenCR=!1),n++;return lr[e]=o,o}function r(e,t){var r=n(e),o=n(t);return{start:{offset:e,line:r.line,column:r.column},end:{offset:t,line:o.line,column:o.column}}}function o(e){ur<fr||(ur>fr&&(fr=ur,pr=[]),pr.push(e))}function i(t,n,r,o){return null!==n&&function(e){var t=1;for(e.sort(function(e,t){return e.description<t.description?-1:e.description>t.description?1:0});t<e.length;)e[t-1]===e[t]?e.splice(t,1):t++}(n),new e(null!==t?t:function(e,t){var n,r,o,i=new Array(e.length);for(o=0;o<e.length;o++)i[o]=e[o].description;return n=e.length>1?i.slice(0,-1).join(", ")+" or "+i[e.length-1]:i[0],r=t?'"'+function(e){function n(e){return e.charCodeAt(0).toString(16).toUpperCase()}return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return"\\x0"+n(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return"\\x"+n(e)}).replace(/[\u0100-\u0FFF]/g,function(e){return"\\u0"+n(e)}).replace(/[\u1000-\uFFFF]/g,function(e){return"\\u"+n(e)})}()+'"':"end of input","Expected "+n+" but "+r+" found."}(n,r),n,r,o)}function s(){var e,t;return e=ur,j()!==Z&&(t=w())!==Z&&j()!==Z?(cr=e,e=W(t)):(ur=e,e=Z),e}function a(){var e;return(e=c())===Z&&(e=u()),e}function u(){var e,n,r,i,s;return(e=g())===Z&&(e=ur,47===t.charCodeAt(ur)?(n=ee,ur++):(n=Z,0===hr&&o(te)),n!==Z?(r=ur,(i=j())!==Z&&(s=c())!==Z?r=i=[i,s]:(ur=r,r=Z),r===Z&&(r=null),r!==Z?(cr=e,e=n=ne(r)):(ur=e,e=Z)):(ur=e,e=Z)),e}function c(){var e,n,r,i,s,a,u,c;if(e=ur,(n=l())!==Z){for(r=[],i=ur,(s=j())!==Z?(t.substr(ur,2)===re?(a=re,ur+=2):(a=Z,0===hr&&o(oe)),a===Z&&(47===t.charCodeAt(ur)?(a=ee,ur++):(a=Z,0===hr&&o(te))),a!==Z&&(u=j())!==Z&&(c=l())!==Z?i=s=[s,a,u,c]:(ur=i,i=Z)):(ur=i,i=Z);i!==Z;)r.push(i),i=ur,(s=j())!==Z?(t.substr(ur,2)===re?(a=re,ur+=2):(a=Z,0===hr&&o(oe)),a===Z&&(47===t.charCodeAt(ur)?(a=ee,ur++):(a=Z,0===hr&&o(te))),a!==Z&&(u=j())!==Z&&(c=l())!==Z?i=s=[s,a,u,c]:(ur=i,i=Z)):(ur=i,i=Z);r!==Z?(cr=e,e=n=ie(n,r)):(ur=e,e=Z)}else ur=e,e=Z;return e}function l(){var e,t,n,r,o,i,s;if(e=ur,(t=f())!==Z)if(j()!==Z)if((n=h())!==Z){for(r=[],o=ur,(i=j())!==Z&&(s=d())!==Z?o=i=[i,s]:(ur=o,o=Z);o!==Z;)r.push(o),o=ur,(i=j())!==Z&&(s=d())!==Z?o=i=[i,s]:(ur=o,o=Z);r!==Z?(cr=e,e=t=se(t,n,r)):(ur=e,e=Z)}else ur=e,e=Z;else ur=e,e=Z;else ur=e,e=Z;return e===Z&&(e=m()),e}function f(){var e,n,r;return e=ur,(n=p())!==Z&&j()!==Z?(t.substr(ur,2)===ae?(r=ae,ur+=2):(r=Z,0===hr&&o(ue)),r!==Z?(cr=e,e=n=ce(n)):(ur=e,e=Z)):(ur=e,e=Z),e===Z&&(e=ur,(n=v())!==Z&&(cr=e,n=le(n)),e=n),e}function p(){var e;return t.substr(ur,16)===fe?(e=fe,ur+=16):(e=Z,0===hr&&o(pe)),e===Z&&(t.substr(ur,8)===he?(e=he,ur+=8):(e=Z,0===hr&&o(de)),e===Z&&(t.substr(ur,9)===ge?(e=ge,ur+=9):(e=Z,0===hr&&o(me)),e===Z&&(t.substr(ur,5)===ve?(e=ve,ur+=5):(e=Z,0===hr&&o(we)),e===Z&&(t.substr(ur,18)===be?(e=be,ur+=18):(e=Z,0===hr&&o(ye)),e===Z&&(t.substr(ur,10)===Ee?(e=Ee,ur+=10):(e=Z,0===hr&&o(Ne)),e===Z&&(t.substr(ur,17)===De?(e=De,ur+=17):(e=Z,0===hr&&o(Te)),e===Z&&(t.substr(ur,9)===xe?(e=xe,ur+=9):(e=Z,0===hr&&o(Re)),e===Z&&(t.substr(ur,9)===Se?(e=Se,ur+=9):(e=Z,0===hr&&o(Ae)),e===Z&&(t.substr(ur,6)===_e?(e=_e,ur+=6):(e=Z,0===hr&&o(Oe)),e===Z&&(t.substr(ur,17)===Pe?(e=Pe,ur+=17):(e=Z,0===hr&&o(Fe)),e===Z&&(t.substr(ur,9)===Ce?(e=Ce,ur+=9):(e=Z,0===hr&&o(Ie)),e===Z&&(t.substr(ur,4)===Me?(e=Me,ur+=4):(e=Z,0===hr&&o(ke)))))))))))))),e}function h(){var e,n,r,i,s;return e=ur,(n=B())!==Z&&j()!==Z?(40===t.charCodeAt(ur)?(r=Ye,ur++):(r=Z,0===hr&&o(Be)),r!==Z&&j()!==Z?(41===t.charCodeAt(ur)?(i=Xe,ur++):(i=Z,0===hr&&o(je)),i!==Z?(cr=e,e=n=Ue(n)):(ur=e,e=Z)):(ur=e,e=Z)):(ur=e,e=Z),e===Z&&(e=ur,t.substr(ur,22)===Ve?(n=Ve,ur+=22):(n=Z,0===hr&&o(Le)),n!==Z&&j()!==Z?(40===t.charCodeAt(ur)?(r=Ye,ur++):(r=Z,0===hr&&o(Be)),r!==Z&&j()!==Z&&(i=P())!==Z&&j()!==Z?(41===t.charCodeAt(ur)?(s=Xe,ur++):(s=Z,0===hr&&o(je)),s!==Z?(cr=e,e=n=He(n,i)):(ur=e,e=Z)):(ur=e,e=Z)):(ur=e,e=Z),e===Z&&(e=ur,(n=Y())!==Z&&(cr=e,n=ze(n)),e=n)),e}function d(){var e,n,r,i;return e=ur,91===t.charCodeAt(ur)?(n=qe,ur++):(n=Z,0===hr&&o($e)),n!==Z&&j()!==Z&&(r=w())!==Z&&j()!==Z?(93===t.charCodeAt(ur)?(i=Je,ur++):(i=Z,0===hr&&o(Ge)),i!==Z?(cr=e,e=n=Ze(r)):(ur=e,e=Z)):(ur=e,e=Z),e}function g(){var e,n,r;return e=ur,t.substr(ur,2)===re?(n=re,ur+=2):(n=Z,0===hr&&o(oe)),n!==Z&&j()!==Z&&(r=c())!==Z?(cr=e,e=n=Ke(r)):(ur=e,e=Z),e}function m(){var e,n;return e=ur,t.substr(ur,2)===Qe?(n=Qe,ur+=2):(n=Z,0===hr&&o(We)),n===Z&&(46===t.charCodeAt(ur)?(n=et,ur++):(n=Z,0===hr&&o(tt))),n!==Z&&(cr=e,n=nt(n)),e=n}function v(){var e,n;return e=ur,64===t.charCodeAt(ur)?(n=rt,ur++):(n=Z,0===hr&&o(ot)),n===Z&&(n=null),n!==Z&&(cr=e,n=it(n)),e=n}function w(){var e,t;return e=ur,(t=T())!==Z&&(cr=e,t=Ze(t)),e=t}function b(){var e,n,r,i;return e=ur,(n=k())!==Z&&(cr=e,n=st(n)),(e=n)===Z&&(e=ur,40===t.charCodeAt(ur)?(n=Ye,ur++):(n=Z,0===hr&&o(Be)),n!==Z&&j()!==Z&&(r=w())!==Z&&j()!==Z?(41===t.charCodeAt(ur)?(i=Xe,ur++):(i=Z,0===hr&&o(je)),i!==Z?(cr=e,e=n=Ze(r)):(ur=e,e=Z)):(ur=e,e=Z),e===Z&&(e=ur,(n=P())!==Z&&(cr=e,n=at(n)),(e=n)===Z&&(e=ur,(n=F())!==Z&&(cr=e,n=ut(n)),(e=n)===Z&&(e=y())))),e}function y(){var e,n,r,i,s,a,u,c,l,f,p,h;if(e=ur,(n=M())!==Z)if(j()!==Z)if(40===t.charCodeAt(ur)?(r=Ye,ur++):(r=Z,0===hr&&o(Be)),r!==Z){if(i=ur,(s=j())!==Z)if((a=w())!==Z){for(u=[],c=ur,(l=j())!==Z?(44===t.charCodeAt(ur)?(f=ct,ur++):(f=Z,0===hr&&o(lt)),f!==Z&&(p=j())!==Z&&(h=w())!==Z?c=l=[l,f,p,h]:(ur=c,c=Z)):(ur=c,c=Z);c!==Z;)u.push(c),c=ur,(l=j())!==Z?(44===t.charCodeAt(ur)?(f=ct,ur++):(f=Z,0===hr&&o(lt)),f!==Z&&(p=j())!==Z&&(h=w())!==Z?c=l=[l,f,p,h]:(ur=c,c=Z)):(ur=c,c=Z);u!==Z?i=s=[s,a,u]:(ur=i,i=Z)}else ur=i,i=Z;else ur=i,i=Z;i===Z&&(i=null),i!==Z&&(s=j())!==Z?(41===t.charCodeAt(ur)?(a=Xe,ur++):(a=Z,0===hr&&o(je)),a!==Z?(cr=e,e=n=ft(n,i)):(ur=e,e=Z)):(ur=e,e=Z)}else ur=e,e=Z;else ur=e,e=Z;else ur=e,e=Z;return e}function E(){var e,n,r,i,s,a,u,c;if(e=ur,(n=N())!==Z){for(r=[],i=ur,(s=j())!==Z?(124===t.charCodeAt(ur)?(a=pt,ur++):(a=Z,0===hr&&o(ht)),a!==Z&&(u=j())!==Z&&(c=N())!==Z?i=s=[s,a,u,c]:(ur=i,i=Z)):(ur=i,i=Z);i!==Z;)r.push(i),i=ur,(s=j())!==Z?(124===t.charCodeAt(ur)?(a=pt,ur++):(a=Z,0===hr&&o(ht)),a!==Z&&(u=j())!==Z&&(c=N())!==Z?i=s=[s,a,u,c]:(ur=i,i=Z)):(ur=i,i=Z);r!==Z?(cr=e,e=n=dt(n,r)):(ur=e,e=Z)}else ur=e,e=Z;return e}function N(){var e,n,r,i,s,u,l;return e=ur,(n=D())!==Z?(r=ur,(i=j())!==Z?(t.substr(ur,2)===re?(s=re,ur+=2):(s=Z,0===hr&&o(oe)),s===Z&&(47===t.charCodeAt(ur)?(s=ee,ur++):(s=Z,0===hr&&o(te))),s!==Z&&(u=j())!==Z&&(l=c())!==Z?r=i=[i,s,u,l]:(ur=r,r=Z)):(ur=r,r=Z),r===Z&&(r=null),r!==Z?(cr=e,e=n=gt(n,r)):(ur=e,e=Z)):(ur=e,e=Z),e===Z&&(e=ur,(n=a())!==Z&&(cr=e,n=mt(n)),e=n),e}function D(){var e,t,n,r,o,i;if(e=ur,(t=b())!==Z){for(n=[],r=ur,(o=j())!==Z&&(i=d())!==Z?r=o=[o,i]:(ur=r,r=Z);r!==Z;)n.push(r),r=ur,(o=j())!==Z&&(i=d())!==Z?r=o=[o,i]:(ur=r,r=Z);n!==Z?(cr=e,e=t=vt(t,n)):(ur=e,e=Z)}else ur=e,e=Z;return e}function T(){var e,n,r,i,s,a,u,c;if(e=ur,(n=x())!==Z){for(r=[],i=ur,(s=j())!==Z?(t.substr(ur,2)===wt?(a=wt,ur+=2):(a=Z,0===hr&&o(bt)),a!==Z&&(u=j())!==Z&&(c=x())!==Z?i=s=[s,a,u,c]:(ur=i,i=Z)):(ur=i,i=Z);i!==Z;)r.push(i),i=ur,(s=j())!==Z?(t.substr(ur,2)===wt?(a=wt,ur+=2):(a=Z,0===hr&&o(bt)),a!==Z&&(u=j())!==Z&&(c=x())!==Z?i=s=[s,a,u,c]:(ur=i,i=Z)):(ur=i,i=Z);r!==Z?(cr=e,e=n=dt(n,r)):(ur=e,e=Z)}else ur=e,e=Z;return e}function x(){var e,n,r,i,s,a,u,c;if(e=ur,(n=R())!==Z){for(r=[],i=ur,(s=j())!==Z?(t.substr(ur,3)===yt?(a=yt,ur+=3):(a=Z,0===hr&&o(Et)),a!==Z&&(u=j())!==Z&&(c=R())!==Z?i=s=[s,a,u,c]:(ur=i,i=Z)):(ur=i,i=Z);i!==Z;)r.push(i),i=ur,(s=j())!==Z?(t.substr(ur,3)===yt?(a=yt,ur+=3):(a=Z,0===hr&&o(Et)),a!==Z&&(u=j())!==Z&&(c=R())!==Z?i=s=[s,a,u,c]:(ur=i,i=Z)):(ur=i,i=Z);r!==Z?(cr=e,e=n=dt(n,r)):(ur=e,e=Z)}else ur=e,e=Z;return e}function R(){var e,n,r,i,s,a,u,c;if(e=ur,(n=S())!==Z){for(r=[],i=ur,(s=j())!==Z?(61===t.charCodeAt(ur)?(a=Nt,ur++):(a=Z,0===hr&&o(Dt)),a===Z&&(t.substr(ur,2)===Tt?(a=Tt,ur+=2):(a=Z,0===hr&&o(xt))),a!==Z&&(u=j())!==Z&&(c=S())!==Z?i=s=[s,a,u,c]:(ur=i,i=Z)):(ur=i,i=Z);i!==Z;)r.push(i),i=ur,(s=j())!==Z?(61===t.charCodeAt(ur)?(a=Nt,ur++):(a=Z,0===hr&&o(Dt)),a===Z&&(t.substr(ur,2)===Tt?(a=Tt,ur+=2):(a=Z,0===hr&&o(xt))),a!==Z&&(u=j())!==Z&&(c=S())!==Z?i=s=[s,a,u,c]:(ur=i,i=Z)):(ur=i,i=Z);r!==Z?(cr=e,e=n=dt(n,r)):(ur=e,e=Z)}else ur=e,e=Z;return e}function S(){var e,n,r,i,s,a,u,c;if(e=ur,(n=A())!==Z){for(r=[],i=ur,(s=j())!==Z?(t.substr(ur,2)===Rt?(a=Rt,ur+=2):(a=Z,0===hr&&o(St)),a===Z&&(60===t.charCodeAt(ur)?(a=At,ur++):(a=Z,0===hr&&o(_t)),a===Z&&(t.substr(ur,2)===Ot?(a=Ot,ur+=2):(a=Z,0===hr&&o(Pt)),a===Z&&(62===t.charCodeAt(ur)?(a=Ft,ur++):(a=Z,0===hr&&o(Ct))))),a!==Z&&(u=j())!==Z&&(c=A())!==Z?i=s=[s,a,u,c]:(ur=i,i=Z)):(ur=i,i=Z);i!==Z;)r.push(i),i=ur,(s=j())!==Z?(t.substr(ur,2)===Rt?(a=Rt,ur+=2):(a=Z,0===hr&&o(St)),a===Z&&(60===t.charCodeAt(ur)?(a=At,ur++):(a=Z,0===hr&&o(_t)),a===Z&&(t.substr(ur,2)===Ot?(a=Ot,ur+=2):(a=Z,0===hr&&o(Pt)),a===Z&&(62===t.charCodeAt(ur)?(a=Ft,ur++):(a=Z,0===hr&&o(Ct))))),a!==Z&&(u=j())!==Z&&(c=A())!==Z?i=s=[s,a,u,c]:(ur=i,i=Z)):(ur=i,i=Z);r!==Z?(cr=e,e=n=dt(n,r)):(ur=e,e=Z)}else ur=e,e=Z;return e}function A(){var e,n,r,i,s,a,u,c;if(e=ur,(n=_())!==Z){for(r=[],i=ur,(s=j())!==Z?(43===t.charCodeAt(ur)?(a=It,ur++):(a=Z,0===hr&&o(Mt)),a===Z&&(45===t.charCodeAt(ur)?(a=kt,ur++):(a=Z,0===hr&&o(Yt))),a!==Z&&(u=j())!==Z&&(c=_())!==Z?i=s=[s,a,u,c]:(ur=i,i=Z)):(ur=i,i=Z);i!==Z;)r.push(i),i=ur,(s=j())!==Z?(43===t.charCodeAt(ur)?(a=It,ur++):(a=Z,0===hr&&o(Mt)),a===Z&&(45===t.charCodeAt(ur)?(a=kt,ur++):(a=Z,0===hr&&o(Yt))),a!==Z&&(u=j())!==Z&&(c=_())!==Z?i=s=[s,a,u,c]:(ur=i,i=Z)):(ur=i,i=Z);r!==Z?(cr=e,e=n=dt(n,r)):(ur=e,e=Z)}else ur=e,e=Z;return e}function _(){var e,n,r,i,s,a,u,c;if(e=ur,(n=O())!==Z){for(r=[],i=ur,(s=j())!==Z?((a=I())===Z&&(t.substr(ur,3)===Bt?(a=Bt,ur+=3):(a=Z,0===hr&&o(Xt)),a===Z&&(t.substr(ur,3)===jt?(a=jt,ur+=3):(a=Z,0===hr&&o(Ut)))),a!==Z&&(u=j())!==Z&&(c=O())!==Z?i=s=[s,a,u,c]:(ur=i,i=Z)):(ur=i,i=Z);i!==Z;)r.push(i),i=ur,(s=j())!==Z?((a=I())===Z&&(t.substr(ur,3)===Bt?(a=Bt,ur+=3):(a=Z,0===hr&&o(Xt)),a===Z&&(t.substr(ur,3)===jt?(a=jt,ur+=3):(a=Z,0===hr&&o(Ut)))),a!==Z&&(u=j())!==Z&&(c=O())!==Z?i=s=[s,a,u,c]:(ur=i,i=Z)):(ur=i,i=Z);r!==Z?(cr=e,e=n=dt(n,r)):(ur=e,e=Z)}else ur=e,e=Z;return e}function O(){var e,n,r;return e=ur,(n=E())!==Z&&(cr=e,n=Ze(n)),(e=n)===Z&&(e=ur,45===t.charCodeAt(ur)?(n=kt,ur++):(n=Z,0===hr&&o(Yt)),n!==Z&&j()!==Z&&(r=O())!==Z?(cr=e,e=n=Vt(r)):(ur=e,e=Z)),e}function P(){var e,n,r,i;if(e=ur,34===t.charCodeAt(ur)?(n=Lt,ur++):(n=Z,0===hr&&o(Ht)),n!==Z){for(r=[],zt.test(t.charAt(ur))?(i=t.charAt(ur),ur++):(i=Z,0===hr&&o(qt));i!==Z;)r.push(i),zt.test(t.charAt(ur))?(i=t.charAt(ur),ur++):(i=Z,0===hr&&o(qt));r!==Z?(34===t.charCodeAt(ur)?(i=Lt,ur++):(i=Z,0===hr&&o(Ht)),i!==Z?(cr=e,e=n=$t(r)):(ur=e,e=Z)):(ur=e,e=Z)}else ur=e,e=Z;if(e===Z)if(e=ur,39===t.charCodeAt(ur)?(n=Jt,ur++):(n=Z,0===hr&&o(Gt)),n!==Z){for(r=[],Zt.test(t.charAt(ur))?(i=t.charAt(ur),ur++):(i=Z,0===hr&&o(Kt));i!==Z;)r.push(i),Zt.test(t.charAt(ur))?(i=t.charAt(ur),ur++):(i=Z,0===hr&&o(Kt));r!==Z?(39===t.charCodeAt(ur)?(i=Jt,ur++):(i=Z,0===hr&&o(Gt)),i!==Z?(cr=e,e=n=$t(r)):(ur=e,e=Z)):(ur=e,e=Z)}else ur=e,e=Z;return e}function F(){var e,n,r,i,s;return e=ur,(n=C())!==Z?(r=ur,46===t.charCodeAt(ur)?(i=et,ur++):(i=Z,0===hr&&o(tt)),i!==Z?((s=C())===Z&&(s=null),s!==Z?r=i=[i,s]:(ur=r,r=Z)):(ur=r,r=Z),r===Z&&(r=null),r!==Z?(cr=e,e=n=Qt(n,r)):(ur=e,e=Z)):(ur=e,e=Z),e===Z&&(e=ur,46===t.charCodeAt(ur)?(n=et,ur++):(n=Z,0===hr&&o(tt)),n!==Z&&(r=C())!==Z?(cr=e,e=n=Wt(r)):(ur=e,e=Z)),e}function C(){var e,n,r;if(e=ur,n=[],en.test(t.charAt(ur))?(r=t.charAt(ur),ur++):(r=Z,0===hr&&o(tn)),r!==Z)for(;r!==Z;)n.push(r),en.test(t.charAt(ur))?(r=t.charAt(ur),ur++):(r=Z,0===hr&&o(tn));else n=Z;return n!==Z&&(cr=e,n=nn(n)),e=n}function I(){var e;return 42===t.charCodeAt(ur)?(e=rn,ur++):(e=Z,0===hr&&o(on)),e}function M(){var e,t;return e=ur,(t=U())!==Z?(cr=ur,(sn(t)?void 0:Z)!==Z?(cr=e,e=t=an(t)):(ur=e,e=Z)):(ur=e,e=Z),e}function k(){var e,n,r;return e=ur,36===t.charCodeAt(ur)?(n=un,ur++):(n=Z,0===hr&&o(cn)),n!==Z&&(r=U())!==Z?(cr=e,e=n=ln(r)):(ur=e,e=Z),e}function Y(){var e,n,r,i;return e=ur,42===t.charCodeAt(ur)?(n=rn,ur++):(n=Z,0===hr&&o(on)),n!==Z&&(cr=e,n=fn()),(e=n)===Z&&(e=ur,(n=H())!==Z?(58===t.charCodeAt(ur)?(r=pn,ur++):(r=Z,0===hr&&o(hn)),r!==Z?(42===t.charCodeAt(ur)?(i=rn,ur++):(i=Z,0===hr&&o(on)),i!==Z?(cr=e,e=n=dn(n)):(ur=e,e=Z)):(ur=e,e=Z)):(ur=e,e=Z),e===Z&&(e=ur,(n=U())!==Z&&(cr=e,n=gn(n)),e=n)),e}function B(){var e;return t.substr(ur,7)===mn?(e=mn,ur+=7):(e=Z,0===hr&&o(vn)),e===Z&&(t.substr(ur,4)===wn?(e=wn,ur+=4):(e=Z,0===hr&&o(bn)),e===Z&&(t.substr(ur,22)===Ve?(e=Ve,ur+=22):(e=Z,0===hr&&o(Le)),e===Z&&(t.substr(ur,4)===yn?(e=yn,ur+=4):(e=Z,0===hr&&o(En))))),e}function X(){var e,n;if(e=[],Nn.test(t.charAt(ur))?(n=t.charAt(ur),ur++):(n=Z,0===hr&&o(Dn)),n!==Z)for(;n!==Z;)e.push(n),Nn.test(t.charAt(ur))?(n=t.charAt(ur),ur++):(n=Z,0===hr&&o(Dn));else e=Z;return e}function j(){var e;return(e=X())===Z&&(e=null),e}function U(){var e,t;return e=ur,(t=V())===Z&&(t=L()),t!==Z&&(cr=e,t=Tn(t)),e=t}function V(){var e,n,r,i;return e=ur,(n=H())!==Z?(58===t.charCodeAt(ur)?(r=pn,ur++):(r=Z,0===hr&&o(hn)),r!==Z&&(i=H())!==Z?(cr=e,e=n=xn(n,i)):(ur=e,e=Z)):(ur=e,e=Z),e}function L(){var e,t;return e=ur,(t=H())!==Z&&(cr=e,t=Rn(t)),e=t}function H(){return $()}function z(){var e;return Sn.test(t.charAt(ur))?(e=t.charAt(ur),ur++):(e=Z,0===hr&&o(An)),e===Z&&(95===t.charCodeAt(ur)?(e=_n,ur++):(e=Z,0===hr&&o(On)),e===Z&&(Pn.test(t.charAt(ur))?(e=t.charAt(ur),ur++):(e=Z,0===hr&&o(Fn)),e===Z&&(Cn.test(t.charAt(ur))?(e=t.charAt(ur),ur++):(e=Z,0===hr&&o(In)),e===Z&&(Mn.test(t.charAt(ur))?(e=t.charAt(ur),ur++):(e=Z,0===hr&&o(kn)),e===Z&&(Yn.test(t.charAt(ur))?(e=t.charAt(ur),ur++):(e=Z,0===hr&&o(Bn)),e===Z&&(Xn.test(t.charAt(ur))?(e=t.charAt(ur),ur++):(e=Z,0===hr&&o(jn)),e===Z&&(Un.test(t.charAt(ur))?(e=t.charAt(ur),ur++):(e=Z,0===hr&&o(Vn)),e===Z&&(Ln.test(t.charAt(ur))?(e=t.charAt(ur),ur++):(e=Z,0===hr&&o(Hn)),e===Z&&(zn.test(t.charAt(ur))?(e=t.charAt(ur),ur++):(e=Z,0===hr&&o(qn)),e===Z&&($n.test(t.charAt(ur))?(e=t.charAt(ur),ur++):(e=Z,0===hr&&o(Jn)),e===Z&&(Gn.test(t.charAt(ur))?(e=t.charAt(ur),ur++):(e=Z,0===hr&&o(Zn)),e===Z&&(Kn.test(t.charAt(ur))?(e=t.charAt(ur),ur++):(e=Z,0===hr&&o(Qn)),e===Z&&(Wn.test(t.charAt(ur))?(e=t.charAt(ur),ur++):(e=Z,0===hr&&o(er))))))))))))))),e}function q(){var e;return(e=z())===Z&&(45===t.charCodeAt(ur)?(e=kt,ur++):(e=Z,0===hr&&o(Yt)),e===Z&&(46===t.charCodeAt(ur)?(e=et,ur++):(e=Z,0===hr&&o(tt)),e===Z&&(en.test(t.charAt(ur))?(e=t.charAt(ur),ur++):(e=Z,0===hr&&o(tn)),e===Z&&(tr.test(t.charAt(ur))?(e=t.charAt(ur),ur++):(e=Z,0===hr&&o(nr)),e===Z&&(rr.test(t.charAt(ur))?(e=t.charAt(ur),ur++):(e=Z,0===hr&&o(or)),e===Z&&(ir.test(t.charAt(ur))?(e=t.charAt(ur),ur++):(e=Z,0===hr&&o(sr)))))))),e}function $(){var e,t,n,r;if(e=ur,(t=z())!==Z){for(n=[],r=q();r!==Z;)n.push(r),r=q();n!==Z?(cr=e,e=t=ar(t,n)):(ur=e,e=Z)}else ur=e,e=Z;return e}var J,G=arguments.length>1?arguments[1]:{},Z={},K={XPath:s},Q=s,W=function(e){return{tree:e,nsPrefixes:vr}},ee="/",te={type:"literal",value:"/",description:'"/"'},ne=function(e){return{type:"/",args:[null,e?e[1]:null]}},re="//",oe={type:"literal",value:"//",description:'"//"'},ie=function(e,t){var n;for(n=0;n<t.length;n++)e=yr(t[n][1],e,t[n][3]);return e},se=function(e,t,n){return mr({type:"step",args:[e,t]},e,n,1)},ae="::",ue={type:"literal",value:"::",description:'"::"'},ce=function(e){return e},le=function(e){return e.length?e:"child"},fe="ancestor-or-self",pe={type:"literal",value:"ancestor-or-self",description:'"ancestor-or-self"'},he="ancestor",de={type:"literal",value:"ancestor",description:'"ancestor"'},ge="attribute",me={type:"literal",value:"attribute",description:'"attribute"'},ve="child",we={type:"literal",value:"child",description:'"child"'},be="descendant-or-self",ye={type:"literal",value:"descendant-or-self",description:'"descendant-or-self"'},Ee="descendant",Ne={type:"literal",value:"descendant",description:'"descendant"'},De="following-sibling",Te={type:"literal",value:"following-sibling",description:'"following-sibling"'},xe="following",Re={type:"literal",value:"following",description:'"following"'},Se="namespace",Ae={type:"literal",value:"namespace",description:'"namespace"'},_e="parent",Oe={type:"literal",value:"parent",description:'"parent"'},Pe="preceding-sibling",Fe={type:"literal",value:"preceding-sibling",description:'"preceding-sibling"'},Ce="preceding",Ie={type:"literal",value:"preceding",description:'"preceding"'},Me="self",ke={type:"literal",value:"self",description:'"self"'},Ye="(",Be={type:"literal",value:"(",description:'"("'},Xe=")",je={type:"literal",value:")",description:'")"'},Ue=function(e){return{type:"nodeType",args:[e,[]]}},Ve="processing-instruction",Le={type:"literal",value:"processing-instruction",description:'"processing-instruction"'},He=function(e,t){return{type:"nodeType",args:[e,[t]]}},ze=function(e){return e},qe="[",$e={type:"literal",value:"[",description:'"["'},Je="]",Ge={type:"literal",value:"]",description:'"]"'},Ze=function(e){return e},Ke=function(e){return yr("//",null,e)},Qe="..",We={type:"literal",value:"..",description:'".."'},et=".",tt={type:"literal",value:".",description:'"."'},nt=function(e){var t={type:"step",args:["self",{type:"nodeType",args:["node",[]]}]};return".."==e&&(t.args[0]="parent"),t},rt="@",ot={type:"literal",value:"@",description:'"@"'},it=function(e){return e?"attribute":""},st=function(e){return e},at=function(e){return e},ut=function(e){return e},ct=",",lt={type:"literal",value:",",description:'","'},ft=function(e,t){var n,r=[];if(t)for(r.push(t[1]),n=0;n<t[2].length;n++)r.push(t[2][n][3]);return{type:"function",args:[e,r]}},pt="|",ht={type:"literal",value:"|",description:'"|"'},dt=function(e,t){return gr(e,t,1,3)},gt=function(e,t){return t?yr(t[1],e,t[3]):e},mt=function(e){return e},vt=function(e,t){return mr(e,"child",t,1)},wt="or",bt={type:"literal",value:"or",description:'"or"'},yt="and",Et={type:"literal",value:"and",description:'"and"'},Nt="=",Dt={type:"literal",value:"=",description:'"="'},Tt="!=",xt={type:"literal",value:"!=",description:'"!="'},Rt="<=",St={type:"literal",value:"<=",description:'"<="'},At="<",_t={type:"literal",value:"<",description:'"<"'},Ot=">=",Pt={type:"literal",value:">=",description:'">="'},Ft=">",Ct={type:"literal",value:">",description:'">"'},It="+",Mt={type:"literal",value:"+",description:'"+"'},kt="-",Yt={type:"literal",value:"-",description:'"-"'},Bt="div",Xt={type:"literal",value:"div",description:'"div"'},jt="mod",Ut={type:"literal",value:"mod",description:'"mod"'},Vt=function(e){return{type:"*",args:[{type:"number",args:[-1]},e]}},Lt='"',Ht={type:"literal",value:'"',description:'"\\""'},zt=/^[^"]/,qt={type:"class",value:'[^"]',description:'[^"]'},$t=function(e){return{type:"string",args:[e.join("")]}},Jt="'",Gt={type:"literal",value:"'",description:'"\'"'},Zt=/^[^']/,Kt={type:"class",value:"[^']",description:"[^']"},Qt=function(e,t){return{type:"number",args:[t?parseFloat(e+"."+t[1]):parseInt(e)]}},Wt=function(e){return{type:"number",args:[parseFloat("."+e)]}},en=/^[0-9]/,tn={type:"class",value:"[0-9]",description:"[0-9]"},nn=function(e){return e.join("")},rn="*",on={type:"literal",value:"*",description:'"*"'},sn=function(e){var t;if(null===dr.args[0])for(t=0;t<br.length;t++)if(dr.args[1]==br[t])return!1;return!0},an=function(e){return""===e.args[0]?e={type:e.type,args:[null,e.args[1]]}:wr(e.args[0]),e},un="$",cn={type:"literal",value:"$",description:'"$"'},ln=function(e){return wr(e.args[0]),{type:"$",args:[e]}},fn=function(){return{type:"name",args:[null,null]}},pn=":",hn={type:"literal",value:":",description:'":"'},dn=function(e){return wr(e),{type:"name",args:[e,null]}},gn=function(e){return wr(e.args[0]),e},mn="comment",vn={type:"literal",value:"comment",description:'"comment"'},wn="text",bn={type:"literal",value:"text",description:'"text"'},yn="node",En={type:"literal",value:"node",description:'"node"'},Nn=/^[ \t\r\n]/,Dn={type:"class",value:"[\\u0020\\u0009\\u000D\\u000A]",description:"[\\u0020\\u0009\\u000D\\u000A]"},Tn=function(e){return dr=e,e},xn=function(e,t){return{type:"name",args:[e,t]}},Rn=function(e){return{type:"name",args:[null,e]}},Sn=/^[A-Z]/,An={type:"class",value:"[A-Z]",description:"[A-Z]"},_n="_",On={type:"literal",value:"_",description:'"_"'},Pn=/^[a-z]/,Fn={type:"class",value:"[a-z]",description:"[a-z]"},Cn=/^[\xC0-\xD6]/,In={type:"class",value:"[\\u00C0-\\u00D6]",description:"[\\u00C0-\\u00D6]"},Mn=/^[\xD8-\xF6]/,kn={type:"class",value:"[\\u00D8-\\u00F6]",description:"[\\u00D8-\\u00F6]"},Yn=/^[\xF8-\u02FF]/,Bn={type:"class",value:"[\\u00F8-\\u02FF]",description:"[\\u00F8-\\u02FF]"},Xn=/^[\u0370-\u037D]/,jn={type:"class",value:"[\\u0370-\\u037D]",description:"[\\u0370-\\u037D]"},Un=/^[\u037F-\u1FFF]/,Vn={type:"class",value:"[\\u037F-\\u1FFF]",description:"[\\u037F-\\u1FFF]"},Ln=/^[\u200C-\u200D]/,Hn={type:"class",value:"[\\u200C-\\u200D]",description:"[\\u200C-\\u200D]"},zn=/^[\u2070-\u218F]/,qn={type:"class",value:"[\\u2070-\\u218F]",description:"[\\u2070-\\u218F]"},$n=/^[\u2C00-\u2FEF]/,Jn={type:"class",value:"[\\u2C00-\\u2FEF]",description:"[\\u2C00-\\u2FEF]"},Gn=/^[\u3001-\uD7FF]/,Zn={type:"class",value:"[\\u3001-\\uD7FF]",description:"[\\u3001-\\uD7FF]"},Kn=/^[\uF900-\uFDCF]/,Qn={type:"class",value:"[\\uF900-\\uFDCF]",description:"[\\uF900-\\uFDCF]"},Wn=/^[\uFDF0-\uFFFD]/,er={type:"class",value:"[\\uFDF0-\\uFFFD]",description:"[\\uFDF0-\\uFFFD]"},tr=/^[\xB7]/,nr={type:"class",value:"[\\u00B7]",description:"[\\u00B7]"},rr=/^[\u0300-\u036F]/,or={type:"class",value:"[\\u0300-\\u036F]",description:"[\\u0300-\\u036F]"},ir=/^[\u203F-\u2040]/,sr={type:"class",value:"[\\u203F-\\u2040]",description:"[\\u203F-\\u2040]"},ar=function(e,t){return e+t.join("")},ur=0,cr=0,lr=[{line:1,column:1,seenCR:!1}],fr=0,pr=[],hr=0;if("startRule"in G){if(!(G.startRule in K))throw new Error("Can't start parsing from rule \""+G.startRule+'".');Q=K[G.startRule]}var dr,gr=function(e,t,n,r){var o,i,s={type:"",args:[]};for(s.args.push(e),o=0;o<t.length;o++){switch(typeof n){case"string":s.type=n;break;case"object":for(s.type=t[o][n[0]],i=1;i<n.length;i++)s.type=s.type[n[i]];break;default:s.type=t[o][n]}s.args.push(void 0===r?t[o]:t[o][r]),s={type:"",args:[s]}}return s.args[0]},mr=function(e,t,n,r){var o,i=[];if(n.length<1)return e;for(o=0;o<n.length;o++)i.push(n[o][r]);return{type:"predicate",args:[t,e,i]}},vr=[],wr=function(e){var t,n=!1;if(null!==e){for(t=0;t<vr.length;t++)if(vr[t]===e){n=!0;break}n||vr.push(e)}},br=["comment","text","processing-instruction","node"],yr=function(e,t,n){return"/"==e?{type:"/",args:[t,n]}:{type:"/",args:[{type:"/",args:[t,{type:"step",args:["descendant-or-self",{type:"nodeType",args:["node",[]]}]}]},n]}};if((J=Q())!==Z&&ur===t.length)return J;throw J!==Z&&ur<t.length&&o({type:"end",description:"end of input"}),i(null,pr,fr<t.length?t.charAt(fr):null,fr<t.length?r(fr,fr+1):r(fr,fr))}}}(),function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof module&&module.exports?module.exports=t():e.returnExports=t()}(this,function(){return XPathJS});